<?php	header("Access-Control-Allow-Origin: *");	header("Content-Type: application/json; charset=UTF-8");	header("Access-Control-Allow-Methods: POST");	header("Access-Control-Max-Age: 3600");	header("Access-Control-Allow-Headers: Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With");	include_once '../config/database.php';	$database = new Database();	$db = $database->getConnection();	$bulk = json_decode(file_get_contents("php://input"));	$stmt = $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);	$stmt = $db->beginTransaction(); 	foreach($bulk->records as $data){		try {		$query = "INSERT INTO glrpt (`rname`,`porb`,`sequence`,`glaccount`,`grouplevel`,`descript`,`print`,`indent`,`underline`,`skipline`,`security`,`who`,`tstamp`,`isdel`,`lreg`,`lstore`)			VALUES 		(:rname,:porb,:sequence,:glaccount,:grouplevel,:descript,:print,:indent,:underline,:skipline,:security,:who,now(),0,:lreg,:lstore)		ON DUPLICATE KEY UPDATE		`rname` = :rname,		`porb` = :porb,		`sequence` = :sequence,		`glaccount` = :glaccount,		`grouplevel` = :grouplevel,		`descript` = :descript,		`print` = :print,		`indent` = :indent,		`underline` = :underline,		`skipline` = :skipline,		`security` = :security,		`who` = :who,		`tstamp` = NOW(),		`lstore` = :lstore,		`lreg` = :lreg,		`isdel` = :isdel";		$stmt = $db->prepare($query);		$thisrname=strip_tags($data->rname);		$thisporb=strip_tags($data->porb);		$thissequence=strip_tags($data->sequence);		$thisglaccount=strip_tags($data->glaccount);		$thisgrouplevel=strip_tags($data->grouplevel);		$thisdescript=strip_tags($data->descript);		$thisprint=strip_tags($data->print);		$thisindent=strip_tags($data->indent);		$thisunderline=strip_tags($data->underline);		$thisskipline=strip_tags($data->skipline);		$thissecurity=strip_tags($data->security);		$thiswho=strip_tags($data->who);		$thislreg=strip_tags($data->lreg);		$thislstore=strip_tags($data->lstore);		$thisisdel=strip_tags($data->isdel);		$thiststamp=strip_tags($data->tstamp);		$stmt->bindParam(':rname', $thisrname);		$stmt->bindParam(':porb', $thisporb);		$stmt->bindParam(':sequence', $thissequence);		$stmt->bindParam(':glaccount', $thisglaccount);		$stmt->bindParam(':grouplevel', $thisgrouplevel);		$stmt->bindParam(':descript', $thisdescript);		$stmt->bindParam(':print', $thisprint);		$stmt->bindParam(':indent', $thisindent);		$stmt->bindParam(':underline', $thisunderline);		$stmt->bindParam(':skipline', $thisskipline);		$stmt->bindParam(':security', $thissecurity);		$stmt->bindParam(':who', $thiswho);		$stmt->bindParam(':lreg', $thislreg);		$stmt->bindParam(':lstore', $thislstore);		$stmt->bindParam(':isdel', $thisisdel);		$stmt->bindParam(':tstamp', $thiststamp);		$stmt->execute();		} catch (PDOException $e) {			$message = $e->getMessage();			echo $message;		}		}		$spiritsEND=$db->commit();		if($spiritsEND==TRUE){			http_response_code(200);			echo json_encode(array("message" => "UPDATED.."));		}		else{			http_response_code(503);			echo json_encode(array("message" => "ERROR UPDATING!!"));			echo json_encode(array("error" =>$spiritsEND));		}?>