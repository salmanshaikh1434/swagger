<?php	header("Access-Control-Allow-Origin: *");	header("Content-Type: application/json; charset=UTF-8");	header("Access-Control-Allow-Methods: POST");	header("Access-Control-Max-Age: 3600");	header("Access-Control-Allow-Headers: Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With");	include_once '../config/database.php';	$database = new Database();	$db = $database->getConnection();	$bulk = json_decode(file_get_contents("php://input"));	$stmt = $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);	$stmt = $db->beginTransaction(); 	foreach($bulk->records as $data){		try {		$query = "INSERT INTO chh (`dl_state`,`dl_number`,`bankacct`,`acct_name`,`acct_addr1`,`acct_addr2`,`acct_city`,`acct_st`,`acct_zip`,`dl_name`,`dl_addr1`,`dl_addr2`,`dl_city`,`dl_st`,`dl_zip`,`ssn_taxid`,`phone1`,`desc1`,`phone2`,`desc2`,`phone3`,`desc3`,`phone4`,`desc4`,`cust_since`,`lst_chk`,`ret_amt`,`ret_nbr`,`upd_dte`,`status`,`desc`,`dl_exp_dte`,`dl_bday`,`dl_desc`,`dl_sex`,`dl_ht`,`dl_wt`,`dl_hair`,`dl_eyes`,`customer`,`store`,`who`,`memo`,`sent`,`tstamp`,`isdel`,`lreg`,`lstore`)			VALUES 		(:dl_state,:dl_number,:bankacct,:acct_name,:acct_addr1,:acct_addr2,:acct_city,:acct_st,:acct_zip,:dl_name,:dl_addr1,:dl_addr2,:dl_city,:dl_st,:dl_zip,:ssn_taxid,:phone1,:desc1,:phone2,:desc2,:phone3,:desc3,:phone4,:desc4,:cust_since,:lst_chk,:ret_amt,:ret_nbr,:upd_dte,:status,:desc,:dl_exp_dte,:dl_bday,:dl_desc,:dl_sex,:dl_ht,:dl_wt,:dl_hair,:dl_eyes,:customer,:store,:who,:memo,:sent,now(),0,:lreg,:lstore)		ON DUPLICATE KEY UPDATE		`dl_state` = :dl_state,		`dl_number` = :dl_number,		`bankacct` = :bankacct,		`acct_name` = :acct_name,		`acct_addr1` = :acct_addr1,		`acct_addr2` = :acct_addr2,		`acct_city` = :acct_city,		`acct_st` = :acct_st,		`acct_zip` = :acct_zip,		`dl_name` = :dl_name,		`dl_addr1` = :dl_addr1,		`dl_addr2` = :dl_addr2,		`dl_city` = :dl_city,		`dl_st` = :dl_st,		`dl_zip` = :dl_zip,		`ssn_taxid` = :ssn_taxid,		`phone1` = :phone1,		`desc1` = :desc1,		`phone2` = :phone2,		`desc2` = :desc2,		`phone3` = :phone3,		`desc3` = :desc3,		`phone4` = :phone4,		`desc4` = :desc4,		`cust_since` = :cust_since,		`lst_chk` = :lst_chk,		`ret_amt` = :ret_amt,		`ret_nbr` = :ret_nbr,		`upd_dte` = :upd_dte,		`status` = :status,		`desc` = :desc,		`dl_exp_dte` = :dl_exp_dte,		`dl_bday` = :dl_bday,		`dl_desc` = :dl_desc,		`dl_sex` = :dl_sex,		`dl_ht` = :dl_ht,		`dl_wt` = :dl_wt,		`dl_hair` = :dl_hair,		`dl_eyes` = :dl_eyes,		`customer` = :customer,		`store` = :store,		`who` = :who,		`memo` = :memo,		`sent` = :sent,		`tstamp` = NOW(),		`lstore` = :lstore,		`lreg` = :lreg,		`isdel` = :isdel";		$stmt = $db->prepare($query);		$thisdl_state=strip_tags($data->dl_state);		$thisdl_number=strip_tags($data->dl_number);		$thisbankacct=strip_tags($data->bankacct);		$thisacct_name=strip_tags($data->acct_name);		$thisacct_addr1=strip_tags($data->acct_addr1);		$thisacct_addr2=strip_tags($data->acct_addr2);		$thisacct_city=strip_tags($data->acct_city);		$thisacct_st=strip_tags($data->acct_st);		$thisacct_zip=strip_tags($data->acct_zip);		$thisdl_name=strip_tags($data->dl_name);		$thisdl_addr1=strip_tags($data->dl_addr1);		$thisdl_addr2=strip_tags($data->dl_addr2);		$thisdl_city=strip_tags($data->dl_city);		$thisdl_st=strip_tags($data->dl_st);		$thisdl_zip=strip_tags($data->dl_zip);		$thisssn_taxid=strip_tags($data->ssn_taxid);		$thisphone1=strip_tags($data->phone1);		$thisdesc1=strip_tags($data->desc1);		$thisphone2=strip_tags($data->phone2);		$thisdesc2=strip_tags($data->desc2);		$thisphone3=strip_tags($data->phone3);		$thisdesc3=strip_tags($data->desc3);		$thisphone4=strip_tags($data->phone4);		$thisdesc4=strip_tags($data->desc4);		$thiscust_since=strip_tags($data->cust_since);		$thislst_chk=strip_tags($data->lst_chk);		$thisret_amt=strip_tags($data->ret_amt);		$thisret_nbr=strip_tags($data->ret_nbr);		$thisupd_dte=strip_tags($data->upd_dte);		$thisstatus=strip_tags($data->status);		$thisdesc=strip_tags($data->desc);		$thisdl_exp_dte=strip_tags($data->dl_exp_dte);		$thisdl_bday=strip_tags($data->dl_bday);		$thisdl_desc=strip_tags($data->dl_desc);		$thisdl_sex=strip_tags($data->dl_sex);		$thisdl_ht=strip_tags($data->dl_ht);		$thisdl_wt=strip_tags($data->dl_wt);		$thisdl_hair=strip_tags($data->dl_hair);		$thisdl_eyes=strip_tags($data->dl_eyes);		$thiscustomer=strip_tags($data->customer);		$thisstore=strip_tags($data->store);		$thiswho=strip_tags($data->who);		$thismemo=strip_tags($data->memo);		$thissent=strip_tags($data->sent);		$thislreg=strip_tags($data->lreg);		$thislstore=strip_tags($data->lstore);		$thisisdel=strip_tags($data->isdel);		$thiststamp=strip_tags($data->tstamp);		$stmt->bindParam(':dl_state', $thisdl_state);		$stmt->bindParam(':dl_number', $thisdl_number);		$stmt->bindParam(':bankacct', $thisbankacct);		$stmt->bindParam(':acct_name', $thisacct_name);		$stmt->bindParam(':acct_addr1', $thisacct_addr1);		$stmt->bindParam(':acct_addr2', $thisacct_addr2);		$stmt->bindParam(':acct_city', $thisacct_city);		$stmt->bindParam(':acct_st', $thisacct_st);		$stmt->bindParam(':acct_zip', $thisacct_zip);		$stmt->bindParam(':dl_name', $thisdl_name);		$stmt->bindParam(':dl_addr1', $thisdl_addr1);		$stmt->bindParam(':dl_addr2', $thisdl_addr2);		$stmt->bindParam(':dl_city', $thisdl_city);		$stmt->bindParam(':dl_st', $thisdl_st);		$stmt->bindParam(':dl_zip', $thisdl_zip);		$stmt->bindParam(':ssn_taxid', $thisssn_taxid);		$stmt->bindParam(':phone1', $thisphone1);		$stmt->bindParam(':desc1', $thisdesc1);		$stmt->bindParam(':phone2', $thisphone2);		$stmt->bindParam(':desc2', $thisdesc2);		$stmt->bindParam(':phone3', $thisphone3);		$stmt->bindParam(':desc3', $thisdesc3);		$stmt->bindParam(':phone4', $thisphone4);		$stmt->bindParam(':desc4', $thisdesc4);		$stmt->bindParam(':cust_since', $thiscust_since);		$stmt->bindParam(':lst_chk', $thislst_chk);		$stmt->bindParam(':ret_amt', $thisret_amt);		$stmt->bindParam(':ret_nbr', $thisret_nbr);		$stmt->bindParam(':upd_dte', $thisupd_dte);		$stmt->bindParam(':status', $thisstatus);		$stmt->bindParam(':desc', $thisdesc);		$stmt->bindParam(':dl_exp_dte', $thisdl_exp_dte);		$stmt->bindParam(':dl_bday', $thisdl_bday);		$stmt->bindParam(':dl_desc', $thisdl_desc);		$stmt->bindParam(':dl_sex', $thisdl_sex);		$stmt->bindParam(':dl_ht', $thisdl_ht);		$stmt->bindParam(':dl_wt', $thisdl_wt);		$stmt->bindParam(':dl_hair', $thisdl_hair);		$stmt->bindParam(':dl_eyes', $thisdl_eyes);		$stmt->bindParam(':customer', $thiscustomer);		$stmt->bindParam(':store', $thisstore);		$stmt->bindParam(':who', $thiswho);		$stmt->bindParam(':memo', $thismemo);		$stmt->bindParam(':sent', $thissent);		$stmt->bindParam(':lreg', $thislreg);		$stmt->bindParam(':lstore', $thislstore);		$stmt->bindParam(':isdel', $thisisdel);		$stmt->bindParam(':tstamp', $thiststamp);		$stmt->execute();		} catch (PDOException $e) {			$message = $e->getMessage();			echo $message;		}		}		$spiritsEND=$db->commit();		if($spiritsEND==TRUE){			http_response_code(200);			echo json_encode(array("message" => "UPDATED.."));		}		else{			http_response_code(503);			echo json_encode(array("message" => "ERROR UPDATING!!"));			echo json_encode(array("error" =>$spiritsEND));		}?>